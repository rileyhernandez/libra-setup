#!/bin/bash
set -e

case "$1" in
    remove|upgrade|deconfigure)
        # Stop service if systemd is running
        if [ -d /run/systemd/system ]; then
            if systemctl is-active --quiet libra.service; then
                echo "Stopping libra service..."
                systemctl stop libra.service
            fi

            if systemctl is-active --quiet sync.service; then
                echo "Stopping sync service..."
                systemctl stop sync.service
            fi

            if systemctl is-active --quiet libra-update.service; then
                echo "Stopping update service..."
                systemctl stop libra-update.service
            fi
        fi
    ;;
esac

exit 0